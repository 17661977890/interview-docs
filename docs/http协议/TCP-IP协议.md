### 什么是tcp/ip
TCP/IP不是一个协议，而是一个协议族的统称。里面包括了IP协议，IMCP协议，TCP协议，以及我们更加熟悉的http、ftp、pop3协议等等。电脑有了这些，就好像学会了外语一样，就可以和其他的计算机终端做自由的交流了。

 **1.链路层：** 

用来处理连接网络的硬件部分，包括控制操作系统、硬件的设备驱动和网络适配器，及光纤等物理可见的部分。硬件上的范畴均属于链路层的作用范围之内。

 **2.网络层：** 

用来处理网络上流动的数据包（网络传输中最小的数据单元），规定了怎样的路径把数据包传输到目标计算机，并把数据包传送给对方。（与tcp/ip协议密切相关的有IP协议、ARP协议、RARP协议）

```
IPv4：头部由20字节定长和一个可选的变长部分（小于等于40字节）组成，32位记录源端IP地址，32位记录目的端IP地址，所有内容长度最大为2^16=65476字节。

IPv6：头部由40字节定长组成。128位记录源端IP地址，128位记录目的端IP地址。

ARP协议：专用于将32位IP地址映射到网卡的48位MAC地址。

RARP协议：主要用于将网卡的48位MAC地址转换为32位IP地址。
```

 **3.传输层：主要包括UDP协议、TCP协议。** 

UDP协议是一种不可靠无连接的传输层协议，不考虑流控制、错误控制，没有重传机制，不会对分组进行顺序检查和排序。

（UDP报头含8字节定长和2字节倍数的数据<不是2字节倍数时需要填充位>）

TCP协议是一种面向连接、可靠的、基于字节流的传输层协议，采用了确认机制、超时重传机制，还会对接收到的TCP报文段进行重新排列整理。

```
UDP优点：
控制选项少，无须建立连接，从而使得数据传输过程中的延迟小、数据传输效率高。
UDP适合对可靠性不高，或网络质量有保障，或对实时性要求较高的应用程序。

TCP优点：
能保证可靠性、稳定性。
TCP适合用于端到端的通信，适用于对可靠性要求较高的服务。
```

4.应用层：负责直接和应用程序接口并提供常见的网络应用服务，此外，为了向应用程序提供有效的网络服务，应用层还需要确立相互通信的应用进程的有效性并提供双方之间的同步，需要提供应用进程所需的信息交换和远程操作，需要建立错误恢复的机制以保证应用层数据的一致性。（有FTP协议、TFTP协议、Telnet协议、DNS协议、HTTP协议）

DNS协议：主要功能是通过用户友好的名称为用户提供域名解析服务，即将主机名域名解析为IP地址。

HTTP协议：是一种详细规定了浏览器和万维网服务器之间互相通信的规则。

### TCP的3次握手和4次挥手
- 在TCP/IP协议中，TCP协议提供可靠的连接服务，采用三次握手建立一个连接。 
- 客户端向服务器发请求，服务器接收请求，服务器接收请求之后发送一个连接标志，客户端接收连接标志之后也向服务器发送一个连接标志，
```
至此连接完成。用打电话类比的话就是： 
小明拨打小红的电话 
小红按下通话键并说了声，喂 （一次握手） 
小明听到小红的回应，也说了声，喂 （二次握手） 
小红接收到小明的回应 （三次握手）
```
- 4次挥手的作用就是断开连接，之所以要断开连接是因为TCP/IP协议是要占用端口的，而计算机的端口是有限的，所以一次传输完成之后是要断开连接的，断开连接的方式就是4次挥手。 
- 连接是由客户端发起的，所以断开连接也要有客户端发起，因为服务器是被动的

```
还是用小明和小红打电话来类比， 
小明：我这没事儿了，你还有事儿吗？ （1次挥手） 
小红：我也没事儿了，你确定没事儿了吗？ （2次挥手） 
小红：我要挂电话了。 （3次挥手） 
小明：好吧，你挂吧。 （4次挥手）
```
